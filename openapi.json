{"openapi":"3.1.0","info":{"title":"RAGdoll Enterprise API","description":"Enterprise-grade namespaced document retrieval and management system","version":"1.0.0"},"paths":{"/":{"get":{"summary":"Root","description":"API health check and information","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/auth/login":{"post":{"summary":"Login","description":"Login to get access token","operationId":"login_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/profile":{"get":{"summary":"Get Profile","description":"Get current user profile","operationId":"get_profile_auth_profile_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}}},"security":[{"HTTPBearer":[]}]}},"/health":{"get":{"summary":"Health Check","description":"Detailed health check","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/query/{namespace}":{"post":{"summary":"Query Namespace","description":"Query documents within a specific namespace","operationId":"query_namespace_query__namespace__post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"namespace","in":"path","required":true,"schema":{"type":"string","title":"Namespace"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueryRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/query/multi":{"post":{"summary":"Query Multiple Namespaces","description":"Query across multiple namespaces, returning results grouped by namespace","operationId":"query_multiple_namespaces_query_multi_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueryRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":{"items":{"$ref":"#/components/schemas/QueryResult"},"type":"array"},"type":"object","title":"Response Query Multiple Namespaces Query Multi Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/query/cross-namespace":{"post":{"summary":"Query Cross Namespace","description":"Query across namespaces and return the globally best results","operationId":"query_cross_namespace_query_cross_namespace_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueryRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/namespaces":{"get":{"summary":"List Namespaces","description":"List all available namespaces","operationId":"list_namespaces_namespaces_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"department","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by department","title":"Department"},"description":"Filter by department"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"string"},"title":"Response List Namespaces Namespaces Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"summary":"Create Namespace","description":"Create a new namespace","operationId":"create_namespace_namespaces_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateNamespaceRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/namespaces/details":{"get":{"summary":"List Namespaces Detailed","description":"List all namespaces with detailed information","operationId":"list_namespaces_detailed_namespaces_details_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"department","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by department","title":"Department"},"description":"Filter by department"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/NamespaceInfo"},"title":"Response List Namespaces Detailed Namespaces Details Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/namespaces/{namespace}":{"get":{"summary":"Get Namespace Details","description":"Get detailed information about a specific namespace","operationId":"get_namespace_details_namespaces__namespace__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"namespace","in":"path","required":true,"schema":{"type":"string","title":"Namespace"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NamespaceInfo"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"summary":"Delete Namespace","description":"Delete a namespace","operationId":"delete_namespace_namespaces__namespace__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"namespace","in":"path","required":true,"schema":{"type":"string","title":"Namespace"}},{"name":"force","in":"query","required":false,"schema":{"type":"boolean","description":"Force deletion without confirmation","default":false,"title":"Force"},"description":"Force deletion without confirmation"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/ingest":{"post":{"summary":"Ingest Documents","description":"Ingest documents into namespaces","operationId":"ingest_documents_ingest_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IngestRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/analytics/overlap":{"get":{"summary":"Analyze Namespace Overlap","description":"Analyze content overlap between two namespaces","operationId":"analyze_namespace_overlap_analytics_overlap_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"namespace1","in":"query","required":true,"schema":{"type":"string","description":"First namespace","title":"Namespace1"},"description":"First namespace"},{"name":"namespace2","in":"query","required":true,"schema":{"type":"string","description":"Second namespace","title":"Namespace2"},"description":"Second namespace"},{"name":"sample_size","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":10,"description":"Sample size for analysis","default":100,"title":"Sample Size"},"description":"Sample size for analysis"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OverlapAnalysis"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/system/overview":{"get":{"summary":"Get System Overview","description":"Get comprehensive system overview and statistics","operationId":"get_system_overview_system_overview_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SystemOverview"}}}}},"security":[{"HTTPBearer":[]}]}},"/namespaces/{namespace}/backup":{"post":{"summary":"Backup Namespace","description":"Create a backup of a namespace","operationId":"backup_namespace_namespaces__namespace__backup_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"namespace","in":"path","required":true,"schema":{"type":"string","title":"Namespace"}}],"requestBody":{"content":{"application/json":{"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Custom backup directory","title":"Backup Dir"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/namespaces/{source_namespace}/clone/{target_namespace}":{"post":{"summary":"Clone Namespace","description":"Clone a namespace to a new namespace","operationId":"clone_namespace_namespaces__source_namespace__clone__target_namespace__post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"source_namespace","in":"path","required":true,"schema":{"type":"string","title":"Source Namespace"}},{"name":"target_namespace","in":"path","required":true,"schema":{"type":"string","title":"Target Namespace"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v2/query/{namespace}":{"post":{"summary":"Enhanced Query Namespace","description":"Enhanced query with caching and hybrid search support","operationId":"enhanced_query_namespace_v2_query__namespace__post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"namespace","in":"path","required":true,"schema":{"type":"string","title":"Namespace"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EnhancedQueryRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EnhancedQueryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v2/query/cross-namespace":{"post":{"summary":"Enhanced Cross Namespace Query","description":"Enhanced cross-namespace search with hybrid capabilities","operationId":"enhanced_cross_namespace_query_v2_query_cross_namespace_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"namespaces","in":"query","required":false,"schema":{"type":"array","items":{"type":"string"},"description":"Specific namespaces to search","title":"Namespaces"},"description":"Specific namespaces to search"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EnhancedQueryRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EnhancedQueryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cache/stats":{"get":{"summary":"Get Cache Stats","description":"Get comprehensive cache statistics","operationId":"get_cache_stats_cache_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/cache/invalidate/{namespace}":{"post":{"summary":"Invalidate Namespace Cache","description":"Invalidate cache for a specific namespace","operationId":"invalidate_namespace_cache_cache_invalidate__namespace__post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"namespace","in":"path","required":true,"schema":{"type":"string","title":"Namespace"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cache/clear":{"post":{"summary":"Clear All Cache","description":"Clear all cache (admin only)","operationId":"clear_all_cache_cache_clear_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/analytics/namespace/{namespace}":{"get":{"summary":"Get Namespace Analytics","description":"Get comprehensive analytics for a namespace","operationId":"get_namespace_analytics_analytics_namespace__namespace__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"namespace","in":"path","required":true,"schema":{"type":"string","title":"Namespace"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/analytics/search/{namespace}":{"get":{"summary":"Get Search Analytics","description":"Get search-specific analytics for a namespace","operationId":"get_search_analytics_analytics_search__namespace__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"namespace","in":"path","required":true,"schema":{"type":"string","title":"Namespace"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"CreateNamespaceRequest":{"properties":{"namespace":{"type":"string","title":"Namespace","description":"Namespace identifier"},"description":{"type":"string","title":"Description","description":"Namespace description","default":""},"department":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Department","description":"Department name"},"contact":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Contact","description":"Contact person/email"},"tags":{"items":{"type":"string"},"type":"array","title":"Tags","description":"Tags for categorization","default":[]}},"type":"object","required":["namespace"],"title":"CreateNamespaceRequest"},"EnhancedQueryRequest":{"properties":{"query":{"type":"string","title":"Query","description":"The search query text"},"top_k":{"type":"integer","maximum":50.0,"minimum":1.0,"title":"Top K","description":"Number of results to return","default":5},"score_threshold":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Score Threshold","description":"Minimum similarity score","default":0.0},"use_hybrid":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Use Hybrid","description":"Force hybrid search on/off"},"filters":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Filters","description":"Metadata filters"},"use_cache":{"type":"boolean","title":"Use Cache","description":"Enable/disable caching","default":true}},"type":"object","required":["query"],"title":"EnhancedQueryRequest"},"EnhancedQueryResponse":{"properties":{"query":{"type":"string","title":"Query"},"results":{"items":{"$ref":"#/components/schemas/EnhancedQueryResult"},"type":"array","title":"Results"},"total_results":{"type":"integer","title":"Total Results"},"processing_time_ms":{"type":"number","title":"Processing Time Ms"},"namespaces_searched":{"items":{"type":"string"},"type":"array","title":"Namespaces Searched"},"search_type":{"type":"string","title":"Search Type"},"cached":{"type":"boolean","title":"Cached","default":false},"cache_hit_rate":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Cache Hit Rate"}},"type":"object","required":["query","results","total_results","processing_time_ms","namespaces_searched","search_type"],"title":"EnhancedQueryResponse"},"EnhancedQueryResult":{"properties":{"text":{"type":"string","title":"Text"},"score":{"type":"number","title":"Score"},"namespace":{"type":"string","title":"Namespace"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata"},"search_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Search Type"},"vector_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Vector Score"},"bm25_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Bm25 Score"},"keyword_matches":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Keyword Matches"}},"type":"object","required":["text","score","namespace","metadata"],"title":"EnhancedQueryResult"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"IngestRequest":{"properties":{"namespace":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Namespace","description":"Target namespace (auto-detect if not provided)"},"description":{"type":"string","title":"Description","description":"Description for the namespace","default":""}},"type":"object","title":"IngestRequest"},"LoginRequest":{"properties":{"username":{"type":"string","title":"Username"},"password":{"type":"string","title":"Password"}},"type":"object","required":["username","password"],"title":"LoginRequest"},"NamespaceInfo":{"properties":{"namespace":{"type":"string","title":"Namespace"},"description":{"type":"string","title":"Description"},"department":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Department"},"contact":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Contact"},"document_count":{"type":"integer","title":"Document Count"},"chunk_count":{"type":"integer","title":"Chunk Count"},"created":{"type":"string","title":"Created"},"last_updated":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Updated"},"tags":{"items":{"type":"string"},"type":"array","title":"Tags","default":[]}},"type":"object","required":["namespace","description","document_count","chunk_count","created"],"title":"NamespaceInfo"},"OverlapAnalysis":{"properties":{"namespace1":{"type":"string","title":"Namespace1"},"namespace2":{"type":"string","title":"Namespace2"},"sample_size":{"type":"integer","title":"Sample Size"},"average_similarity":{"type":"number","title":"Average Similarity"},"max_similarity":{"type":"number","title":"Max Similarity"},"high_overlap_count":{"type":"integer","title":"High Overlap Count"},"high_overlap_percentage":{"type":"number","title":"High Overlap Percentage"}},"type":"object","required":["namespace1","namespace2","sample_size","average_similarity","max_similarity","high_overlap_count","high_overlap_percentage"],"title":"OverlapAnalysis"},"QueryRequest":{"properties":{"query":{"type":"string","title":"Query","description":"The search query text"},"top_k":{"type":"integer","maximum":50.0,"minimum":1.0,"title":"Top K","description":"Number of results to return","default":5},"score_threshold":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Score Threshold","description":"Minimum similarity score","default":0.0},"namespace_filter":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Namespace Filter","description":"Filter by specific namespaces"}},"type":"object","required":["query"],"title":"QueryRequest"},"QueryResponse":{"properties":{"query":{"type":"string","title":"Query"},"results":{"items":{"$ref":"#/components/schemas/QueryResult"},"type":"array","title":"Results"},"total_results":{"type":"integer","title":"Total Results"},"processing_time_ms":{"type":"number","title":"Processing Time Ms"},"namespaces_searched":{"items":{"type":"string"},"type":"array","title":"Namespaces Searched"}},"type":"object","required":["query","results","total_results","processing_time_ms","namespaces_searched"],"title":"QueryResponse"},"QueryResult":{"properties":{"text":{"type":"string","title":"Text"},"score":{"type":"number","title":"Score"},"namespace":{"type":"string","title":"Namespace"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata"}},"type":"object","required":["text","score","namespace","metadata"],"title":"QueryResult"},"SystemOverview":{"properties":{"total_namespaces":{"type":"integer","title":"Total Namespaces"},"total_documents":{"type":"integer","title":"Total Documents"},"total_chunks":{"type":"integer","title":"Total Chunks"},"total_size_mb":{"type":"number","title":"Total Size Mb"},"departments":{"items":{"type":"string"},"type":"array","title":"Departments"},"namespaces":{"items":{"$ref":"#/components/schemas/NamespaceInfo"},"type":"array","title":"Namespaces"}},"type":"object","required":["total_namespaces","total_documents","total_chunks","total_size_mb","departments","namespaces"],"title":"SystemOverview"},"Token":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type"},"expires_in":{"type":"integer","title":"Expires In"}},"type":"object","required":["access_token","token_type","expires_in"],"title":"Token"},"User":{"properties":{"username":{"type":"string","title":"Username"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"roles":{"items":{"type":"string"},"type":"array","title":"Roles","default":[]},"namespaces":{"items":{"type":"string"},"type":"array","title":"Namespaces","default":[]},"is_active":{"type":"boolean","title":"Is Active","default":true}},"type":"object","required":["username"],"title":"User"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}